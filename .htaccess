# BEGIN WordPress
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  RewriteCond %{REQUEST_URI} ^/start(?:\/?)$
  RewriteRule .* "https://zen.coderdojo.com/start-dojo" [L,R=permanent]
  
  # ELB to HTTPS
  RewriteCond %{HTTP:X-Forwarded-Proto} =http
  RewriteRule .* https://%{HTTP:Host}%{REQUEST_URI} [L,R=permanent]
  
  # Fix old permalink scheme
  RewriteCond %{REQUEST_URI} ^/news/(.+)$
  RewriteRule .* /%1 [L,R=permanent]
  
  # Default fallback
  RewriteRule ^index\.php$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.php [L]

</IfModule>

# Block WordPress xmlrpc.php requests
<Files xmlrpc.php>
  Order allow,deny
  Deny from all
</Files>
